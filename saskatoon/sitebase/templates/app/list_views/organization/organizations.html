{% extends 'app/list_views/base.html' %}
{% load i18n %}
{% load static %}
{% load equipment_point_status %}

{% block map %}
    <script type="module">import "{% static 'js/map/main.js' %}"</script>
    <leaflet-map style="height: 80vh;">
        {% for org in data %}
             <leaflet-marker
                 lat="{{ org.latitude }}"
                 long="{{ org.longitude }}"
                 popup-anchor="10 -5"
                 class="fa-solid fa-toolbox fa-xl"
                 style="color: {{ filter.form.status.value | reservation }};"
                 class-on-hover="fa-solid fa-toolbox fa-2x"
                 icon-anchor-on-hover="5 2"
             >
                <h3><a href="{% url 'organization-detail' org.actor_id %}">{{ org.civil_name }}</a></h3>
                <p>{{ org.description }}</p>
                <address>
                  <p>{{ org.short_address }}</p>
                  <p>
                    {% trans "Contact" %} {{ org.contact_person.name }}
                  </br>
                    {% if org.contact_person.phone is not None %}
                      {{ org.contact_person.phone }}
                      </br>
                   {% endif %}
                    {% if org.contact_person.email is not None %}
                      <a href="mailto:{{ org.contact_person.email }}">{{ org.contact_person.email }}</a>
                    {% endif %}
                  </p>
              </address>
            </leaflet-marker>
        {% endfor %}
    </leaflet-map>

{% endblock map %}

{% block table %}

    {% include 'app/list_views/organization/modal.html' %}

    <thead>
        <tr>
            <th class="col-xs-1">#</th>
            <th class="col-xs-2">{% trans "Organization" %}</th>
            <th class="col-xs-1">{% trans "Contact" %}</th>
            <th class="col-xs-1">{% trans "Beneficiary" %}</th>
            <th class="col-xs-1">{% trans "Equipment" %}</th>
            <th class="col-xs-2">{% trans "Borough" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for org in data %}
            {% include 'app/list_views/organization/data_row.html' %}
        {% endfor %}
    </tbody>

{% endblock table %}

